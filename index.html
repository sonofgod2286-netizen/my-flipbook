<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <title>ì‹œë¯¼ê³¼ í•¨ê»˜í•˜ëŠ” ì˜¬ë°”ë¥¸ ìì „ê±° ì´ìš©í•˜ê¸°</title>

  <style>
    body {
      margin: 0;
      background: #0f1720;
      display: flex;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
      color: #e5e7eb;
    }
    #wrapper {
      margin-top: 32px;
    }
    /* ì±… ì»¨í…Œì´ë„ˆëŠ” ê°€ìš´ë° ì •ë ¬ë§Œ */
    #flipbook {
      margin: 0 auto;
    }
    /* í˜ì´ì§€ëŠ” í¬ê¸°ë¥¼ JSì—ì„œ ì¡°ì ˆí•¨ */
    .page {
      background-size: cover;
      background-position: center;
      background-color: #ffffff;
    }
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .controls button {
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid #324355;
      background: #1f2933;
      color: #f9fafb;
      cursor: pointer;
    }
    .controls button:hover {
      background: #243447;
    }
    .page-indicator {
      font-variant-numeric: tabular-nums;
      font-size: 14px;
    }
  </style>

  <!-- jQuery ë¨¼ì € ë¡œë“œ -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- ê·¸ë‹¤ìŒ Turn.js 3.x -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
</head>
<body>

<div id="wrapper">
  <div class="controls">
    <button id="prevBtn">â—€ ì´ì „</button>
    <span class="page-indicator" id="pageIndicator">1 / 36</span>
    <button id="nextBtn">ë‹¤ìŒ â–¶</button>
  </div>
  <div id="flipbook"></div>
</div>

<script>
  const totalPages = 36;  // ì „ì²´ í˜ì´ì§€ ìˆ˜

  function loadPages() {
    const fb = document.getElementById('flipbook');
    for (let i = 1; i <= totalPages; i++) {
      const page = document.createElement('div');
      page.className = 'page';
      page.style.backgroundImage = `url('./pages/${i}.jpg')`;
      fb.appendChild(page);
    }
  }

  // í™”ë©´ í¬ê¸°ì— ë§ì¶° ì±…/í˜ì´ì§€ ì‚¬ì´ì¦ˆ + ì‹±ê¸€/ë”ë¸” ëª¨ë“œ ê³„ì‚°
  function getBookLayout() {
    const vw = window.innerWidth || document.documentElement.clientWidth;

    let pageWidth = 480;
    let displayMode = 'double'; // ê¸°ë³¸ì€ ì–‘ë©´

    if (vw <= 768) {
      // ëª¨ë°”ì¼: í•œ í˜ì´ì§€ì”©
      displayMode = 'single';
      pageWidth = vw * 0.8;   // í™”ë©´ì˜ 80% ì •ë„ í­
    } else if (vw <= 1024) {
      // íƒœë¸”ë¦¿: ì–‘ë©´ì´ì§€ë§Œ ì¡°ê¸ˆ ì¤„ì´ê¸°
      pageWidth = vw * 0.28;
    }

    const pageHeight = pageWidth * 4 / 3;  // 3:4 ë¹„ìœ¨
    const bookWidth = (displayMode === 'double') ? pageWidth * 2 : pageWidth;
    const bookHeight = pageHeight;

    return { bookWidth, bookHeight, pageWidth, pageHeight, displayMode };
  }

  function applySize() {
    const s = getBookLayout();
    $('#flipbook').turn('size', s.bookWidth, s.bookHeight);
    $('#flipbook').turn('display', s.displayMode);
    $('.page').css({
      width: s.pageWidth + 'px',
      height: s.pageHeight + 'px'
    });
  }

  function updateIndicator(current) {
    const indicator = document.getElementById('pageIndicator');
    indicator.textContent = current + ' / ' + totalPages;
  }

  $(function () {
    loadPages();

    const s = getBookLayout();

    $('#flipbook').turn({
      width: s.bookWidth,
      height: s.bookHeight,
      display: s.displayMode,   // ğŸ”¹ ì—¬ê¸°!
      autoCenter: true,
      elevation: 50,
      gradients: true,
      when: {
        turned: function (e, page) {
          updateIndicator(page);
        }
      }
    });

    $('.page').css({
      width: s.pageWidth + 'px',
      height: s.pageHeight + 'px'
    });

    // ì´ˆê¸° í˜ì´ì§€ ì¸ë””ì¼€ì´í„°
    updateIndicator(1);

    $('#prevBtn').on('click', function () {
      $('#flipbook').turn('previous');
    });
    $('#nextBtn').on('click', function () {
      $('#flipbook').turn('next');
    });

    // í‚¤ë³´ë“œ â† â†’ ë¡œ í˜ì´ì§€ ë„˜ê¸°ê¸° (PCìš©)
    $(document).on('keydown', function (e) {
      if (e.key === 'ArrowLeft') $('#flipbook').turn('previous');
      if (e.key === 'ArrowRight') $('#flipbook').turn('next');
    });

    // í™”ë©´ íšŒì „/í¬ê¸° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì‹±ê¸€/ë”ë¸” + í¬ê¸° ì¬ê³„ì‚°
    $(window).on('resize', function () {
      applySize();
    });
  });
</script>

</body>
</html>
