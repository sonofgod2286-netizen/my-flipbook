<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <title>ì‹œë¯¼ê³¼ í•¨ê»˜í•˜ëŠ” ì˜¬ë°”ë¥¸ ìì „ê±° ì´ìš©í•˜ê¸°</title>

  <style>
    body {
  margin: 0;
  background: #0f1720;
  display: flex;
  justify-content: center;
  align-items: center;      /* ğŸ”¹ ì„¸ë¡œë„ ê°€ìš´ë° ì •ë ¬ */
  min-height: 100vh;        /* ğŸ”¹ í™”ë©´ ë†’ì´ ê½‰ ì±„ìš°ê¸° */
  font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
  color: #e5e7eb;
}
#wrapper {
  margin-top: 0;            /* ğŸ”¹ ìœ„ ì—¬ë°± ì œê±° */
}
#flipbook {
  margin: 0 auto;
}
.page {
  background-size: cover;
  background-position: center;
  background-color: #ffffff;
}
    }
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .controls button {
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid #324355;
      background: #1f2933;
      color: #f9fafb;
      cursor: pointer;
    }
    .controls button:hover {
      background: #243447;
    }
    .page-indicator {
      font-variant-numeric: tabular-nums;
      font-size: 14px;
    }
  </style>

  <!-- jQuery ë¨¼ì € ë¡œë“œ -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- ê·¸ë‹¤ìŒ Turn.js 3.x -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
</head>
<body>

<div id="wrapper">
  <div class="controls">
    <button id="prevBtn">â—€ ì´ì „</button>
    <span class="page-indicator" id="pageIndicator">1 / 36</span>
    <button id="nextBtn">ë‹¤ìŒ â–¶</button>
  </div>
  <div id="flipbook"></div>
</div>

<script>
  const totalPages = 36;  // ì „ì²´ í˜ì´ì§€ ìˆ˜

  function loadPages() {
    const fb = document.getElementById('flipbook');
    for (let i = 1; i <= totalPages; i++) {
      const page = document.createElement('div');
      page.className = 'page';
      page.style.backgroundImage = `url('./pages/${i}.jpg')`;
      fb.appendChild(page);
    }
  }

  // í™”ë©´ í¬ê¸°ì— ë§ì¶° ì±…/í˜ì´ì§€ ì‚¬ì´ì¦ˆ + ì‹±ê¸€/ë”ë¸” ëª¨ë“œ ê³„ì‚°
  function getBookLayout() {
    const vw = window.innerWidth || document.documentElement.clientWidth;
    const vh = window.innerHeight || document.documentElement.clientHeight;

    let pageWidth = 480;
    let displayMode = 'double'; // ê¸°ë³¸ì€ ì–‘ë©´

    if (vw <= 768) {
      // ğŸ“± ëª¨ë°”ì¼: ë‹¨ë©´ + í™”ë©´ì— ê½‰ ì°¨ê²Œ
      displayMode = 'single';

      // ì¼ë‹¨ í­ ê¸°ì¤€ìœ¼ë¡œ ì¡ê³ 
      pageWidth = vw * 0.9;
      let pageHeight = pageWidth * 4 / 3;

      // ë„ˆë¬´ í‚¤ê°€ í¬ë©´, ë†’ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì‹œ ë§ì¶”ê¸°
      const maxHeight = vh * 0.9; // ìƒí•˜ ì—¬ë°± 10% ì •ë„ë§Œ ë‚¨ê¹€
      if (pageHeight > maxHeight) {
        pageHeight = maxHeight;
        pageWidth = pageHeight * 3 / 4;
      }

      const bookWidth = pageWidth;
      const bookHeight = pageHeight;
      return { bookWidth, bookHeight, pageWidth, pageHeight, displayMode };
    }

    // ğŸ’» íƒœë¸”ë¦¿/PC: ì–‘ë©´
    if (vw <= 1024) {
      pageWidth = vw * 0.28;
    } else {
      pageWidth = 480;
    }

    const pageHeight = pageWidth * 4 / 3;
    const bookWidth = pageWidth * 2;
    const bookHeight = pageHeight;

    return { bookWidth, bookHeight, pageWidth, pageHeight, displayMode };
  }

  function applySize() {
    const s = getBookLayout();
    $('#flipbook').turn('size', s.bookWidth, s.bookHeight);
    $('#flipbook').turn('display', s.displayMode);
    $('.page').css({
      width: s.pageWidth + 'px',
      height: s.pageHeight + 'px'
    });
  }

  function updateIndicator(current) {
    const indicator = document.getElementById('pageIndicator');
    indicator.textContent = current + ' / ' + totalPages;
  }

  $(function () {
    loadPages();

    const s = getBookLayout();

    $('#flipbook').turn({
      width: s.bookWidth,
      height: s.bookHeight,
      display: s.displayMode,
      autoCenter: true,
      elevation: 50,
      gradients: true,
      when: {
        turned: function (e, page) {
          updateIndicator(page);
        }
      }
    });

    $('.page').css({
      width: s.pageWidth + 'px',
      height: s.pageHeight + 'px'
    });

    // ì´ˆê¸° í˜ì´ì§€ ì¸ë””ì¼€ì´í„°
    updateIndicator(1);

    // â—€ / â–¶ ë²„íŠ¼
    $('#prevBtn').on('click', function () {
      $('#flipbook').turn('previous');
    });
    $('#nextBtn').on('click', function () {
      $('#flipbook').turn('next');
    });

    // í‚¤ë³´ë“œ â† â†’ (PCìš©)
    $(document).on('keydown', function (e) {
      if (e.key === 'ArrowLeft') $('#flipbook').turn('previous');
      if (e.key === 'ArrowRight') $('#flipbook').turn('next');
    });

    // ğŸ“± í˜ì´ì§€ ì•„ë¬´ ê³³ì´ë‚˜ íƒ­í•´ì„œ ë„˜ê¸°ê¸°
    $('#flipbook').on('click touchend', function (e) {
      const offset = $(this).offset();
      const centerX = offset.left + $(this).width() / 2;
      const x = e.originalEvent.touches ? e.originalEvent.touches[0].clientX : e.clientX;

      if (x < centerX) {
        $('#flipbook').turn('previous');
      } else {
        $('#flipbook').turn('next');
      }
    });

    // í™”ë©´ íšŒì „/í¬ê¸° ë³€ê²½ ì‹œ ìë™ ë¦¬ì‚¬ì´ì¦ˆ
    $(window).on('resize', function () {
      applySize();
    });
  });
</script>

</body>
</html>
